<?xml version="1.0"?>

<!DOCTYPE html>
<html lang="en-US">
<head>
<!-- 	<script src="../deps/jquery-1.7.1.min.js"></script> -->
	<script src="../deps/raphael.js"></script>
<!--   	<link rel="stylesheet" href="qunit.css" type="text/css" media="screen" /> -->
<!-- 	<script type="text/javascript" src="qunit.js"></script> -->
<!-- 	<script type="text/javascript" src="../rm.js"></script> -->
	
	<script type="text/javascript" src="fonts/my-underwood.cufonfonts.js"></script>
	<script type="text/javascript" src="fonts/Acquaintance_400.font.js"></script>
	
<title>Raphael markup test 1</title>
</head>
<body>

<!--  <h1 id="qunit-header">QUnit raphael markup tests</h1> -->
<!--  <h2 id="qunit-banner"></h2> -->
<!--  <div id="qunit-testrunner-toolbar"></div> -->
<!--  <h2 id="qunit-userAgent"></h2> -->
<!--  <ol id="qunit-tests"></ol> -->
<!--  <div id="qunit-fixture">test markup, will be hidden</div> -->
 

<script type="text/javascript">

// t.attr("text", tempText.substring(1));

/**
 * @return a new text shape
 */
function textWrapp(paper, content, width) {
	var t = paper.text(width, width).attr('text-anchor', 'start');	
	var words = content.split(" ");
	var tempText = "";
	for (var i=0; i<words.length; i++) {
	  t.attr("text", tempText + " " + words[i]);
	  if (t.getBBox().width > maxWidth) {
	    tempText += "\n" + words[i];
	  } else {
	    tempText += " " + words[i];
	  }
	}
	t.attr("text", tempText.substring(1));
	return t;
}

function textWrapp2(t, width) {
//	var t = paper.text(width, width).attr(attrs).attr('text-anchor', 'start');
	t.attr({'text-anchor': 'start'});
	var	content = t.attr("text"), 
		words = content.split(" "), tempText = "";
	for (var i=0; i<words.length; i++) {
	  t.attr("text", tempText + " " + words[i]);
	  if (t.getBBox().width > maxWidth) {
	    tempText += "\n" + words[i];
	  } else {
	    tempText += " " + words[i];
	  }
	}
	t.attr("text", tempText.substring(1));
}


var r = Raphael(0, 0, 500, 500);
// var t = r.text(100, 100).attr('text-anchor', 'start');
var maxWidth = 100;

var content = "Mauris mauris ante, blandit et, ultrices a, suscipit eget, quam. Integer ut neque. Vivamus nisi metus, molestie vel, gravida in, condimentum sit amet, nunc. Nam a nibh. Donec suscipit eros. Nam mi. Proin viverra leo ut odio. Curabitur malesuada. Vestibulum a velit eu ante scelerisque vulputate. ";
var t = r.text(100, 100, content).attr('text-anchor', 'start');
textWrapp2(t, maxWidth); 
</script>


</body>
</html>